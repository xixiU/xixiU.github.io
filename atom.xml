<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>初来的xiaomu</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-07-09T03:47:15.979Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>haha无知</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>selenium3环境配置及其他细节优化</title>
    <link href="http://yoursite.com/2017/07/09/python3-selenium3%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E4%BB%96%E7%BB%86%E8%8A%82%E4%BC%98%E5%8C%96/"/>
    <id>http://yoursite.com/2017/07/09/python3-selenium3环境配置及其他细节优化/</id>
    <published>2017-07-09T03:47:16.003Z</published>
    <updated>2017-07-09T03:47:15.979Z</updated>
    
    <content type="html"><![CDATA[<p>之前在windows使用的firefox和chrome都是绿色版，配置的selenium3一直没有成功，于是尝试着在Linux下配置，成功配置了！</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>OS: Linux ubuntu 16.04<br>python3:Python 3.5.2<br>Firefox默认安装</p>
<h1 id="下载安装selenium3"><a href="#下载安装selenium3" class="headerlink" title="下载安装selenium3"></a>下载安装selenium3</h1><h2 id="确定操作系统架构"><a href="#确定操作系统架构" class="headerlink" title="确定操作系统架构"></a>确定操作系统架构</h2><p>   打开<code>终端</code>，输入<code>sudo uname -p</code></p>
<ul>
<li>若返回<code>i686</code>，证明为32为操作系统</li>
<li>若返回<code>x86_64</code>,证明为64位操作系统</li>
</ul>
<h2 id="安装selenium3"><a href="#安装selenium3" class="headerlink" title="安装selenium3"></a>安装selenium3</h2><p>   对于同时安装python2与python3的环境而言，采用<br>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install selenium3</span><br></pre></td></tr></table></figure></p>
<p>   若提示权限不够，加上sudo，即<br>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo python3 -m pip install selenium3</span><br></pre></td></tr></table></figure></p>
<h2 id="下载geckodriver"><a href="#下载geckodriver" class="headerlink" title="下载geckodriver"></a>下载geckodriver</h2><p>   若firefox版本过高，需要安装geckodriver<br>   这里是<a href="https://github.com/mozilla/geckodriver/releases" target="_blank" rel="external">下载地址</a><br>   选择对应操作系统版本的下载，然后<code>解压，并进入解压之后的目录</code>，接着<br>   安装geckodriver <code>记住要在解压之后的父目录操作</code><br>   cp geckodriver /usr/local/bin/</p>
<h2 id="安装xvfb"><a href="#安装xvfb" class="headerlink" title="安装xvfb"></a>安装xvfb</h2><p>sudo apt-get install xvfb</p>
<h2 id="安装pyvirtualdisplay"><a href="#安装pyvirtualdisplay" class="headerlink" title="安装pyvirtualdisplay"></a>安装pyvirtualdisplay</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install pyvirtualdisplay</span><br></pre></td></tr></table></figure>
<h1 id="测试selenium3"><a href="#测试selenium3" class="headerlink" title="测试selenium3"></a>测试selenium3</h1><p> 复制以下代码，保存为test.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Firefox()</span><br><span class="line"></span><br><span class="line">driver.get(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">driver.find_element_by_id(<span class="string">"kw"</span>).send_keys(<span class="string">"python开发"</span>)</span><br><span class="line">driver.find_element_by_id(<span class="string">"su"</span>).click()</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">5</span>) <span class="comment">#等待5s，关闭浏览器。</span></span><br><span class="line"></span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure></p>
<p>然后运行</p>
<p>若报错<code>selenium.common.exceptions.WebDriverException: Message: &#39;geckodriver&#39; executable may have wrong permissions</code></p>
<ul>
<li>定位到之前geckodriver的目录，设置权限为-rwxr-xr-x<br>即<code>sudo chmod 755 geckodriver</code></li>
</ul>
<h1 id="其他优化"><a href="#其他优化" class="headerlink" title="其他优化"></a>其他优化</h1><h2 id="PYPI-更换国内源"><a href="#PYPI-更换国内源" class="headerlink" title="PYPI 更换国内源"></a>PYPI 更换国内源</h2><p>在安装过程中，发现默认的安装源太慢，可以通过更换国内源来提速。<br>笔者这边较快的源是<a href="https://mirrors.aliyun.com/pypi/simple/" target="_blank" rel="external">阿里源</a>和<a href="https://pypi.tuna.tsinghua.edu.cn/simple" target="_blank" rel="external">清华源</a></p>
<ul>
<li>WINDOWS更换<br>找到python的安装目录，定位到\Lib\site-packages\pip\目录，然后打开cmdoptions.py，搜索index_url<br>得到如下<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">index_url = partial(</span><br><span class="line">    Option,</span><br><span class="line">    <span class="string">'-i'</span>, <span class="string">'--index-url'</span>, <span class="string">'--pypi-url'</span>,</span><br><span class="line">    dest=<span class="string">'index_url'</span>,</span><br><span class="line">    metavar=<span class="string">'URL'</span>,</span><br><span class="line">    default=PyPI.simple_url,</span><br><span class="line">    </span><br><span class="line">    help=<span class="string">"Base URL of Python Package Index (default %default). "</span></span><br><span class="line">         <span class="string">"This should point to a repository compliant with PEP 503 "</span></span><br><span class="line">         <span class="string">"(the simple repository API) or a local directory laid out "</span></span><br><span class="line">         <span class="string">"in the same format."</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>修改为以下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">index_url = partial(</span><br><span class="line">    Option,</span><br><span class="line">    <span class="string">'-i'</span>, <span class="string">'--index-url'</span>, <span class="string">'--pypi-url'</span>,</span><br><span class="line">    dest=<span class="string">'index_url'</span>,</span><br><span class="line">    metavar=<span class="string">'URL'</span>,</span><br><span class="line">    <span class="comment">#default=PyPI.simple_url,</span></span><br><span class="line">    <span class="comment">#清华源</span></span><br><span class="line">    <span class="comment">#default='https://pypi.tuna.tsinghua.edu.cn/simple',</span></span><br><span class="line">    <span class="comment">#阿里源</span></span><br><span class="line">    default=<span class="string">'https://mirrors.aliyun.com/pypi/simple/'</span>,</span><br><span class="line">    </span><br><span class="line">    help=<span class="string">"Base URL of Python Package Index (default %default). "</span></span><br><span class="line">         <span class="string">"This should point to a repository compliant with PEP 503 "</span></span><br><span class="line">         <span class="string">"(the simple repository API) or a local directory laid out "</span></span><br><span class="line">         <span class="string">"in the same format."</span>)</span><br></pre></td></tr></table></figure></p>
<p><code>清华源和阿里源可以自己选择，只需要将另外的注释掉就可以了</code></p>
<ul>
<li>Linux更换<br>在/.pip/下新建或修改pip.conf为<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">index-url = https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>注意</code><br>在添加源的时候，要使用加密链接，即https。若使用http，需要添加–trusted-host这一参数<br>以上方法是采用修改默认源的方法，还可以在安装的时候，指定安装源，使用pip -i参数.如<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo python3 -m pip install selenium3 -i https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure></p>
<p>同理，若使用http，需要添加–trusted-host这一参数</p>
<h2 id="pip-升级所有package"><a href="#pip-升级所有package" class="headerlink" title="pip 升级所有package"></a>pip 升级所有package</h2><ul>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze --local | grep -v <span class="string">'^\-e'</span> | cut -d = -f <span class="number">1</span>  | xargs -n1 pip install -U</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a href="https://stackoverflow.com/questions/2720014/upgrading-all-packages-with-pip" target="_blank" rel="external">参考来源</a></p>
<ul>
<li>采用pip 先列出outdate，再升级<br>即</li>
</ul>
<ol>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip list --outdate --format=freeze &gt;&gt;update3.txt</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>update3.txt为输出outdate的文件</p>
<ol>
<li>打开update3.txt，去掉所有package后面的版本信息，也就是==以及以后的信息<br>如pyOpenSSL==0.15.1 修改为pyOpenSSL</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install -r update3.txt -U</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="ubuntu清理垃圾"><a href="#ubuntu清理垃圾" class="headerlink" title="ubuntu清理垃圾"></a>ubuntu清理垃圾</h2><ol>
<li><p>清理apt载安装软件缓存文件<br>$sudo apt-get clean</p>
</li>
<li><p>清理期软件包<br>$sudo apt-get autoclean</p>
</li>
<li><p>自卸载没软件依赖关系软件<br>$sudo apt-get autoremove</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      ubuntu下python3+selenium3环境配置，以及更换PYPI国内源、pip升级所有package、ubuntu清理垃圾
    
    </summary>
    
      <category term="python爬虫" scheme="http://yoursite.com/categories/python%E7%88%AC%E8%99%AB/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
      <category term="爬虫" scheme="http://yoursite.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>毕业啦</title>
    <link href="http://yoursite.com/2017/07/04/%E9%87%8D%E6%9B%B4/"/>
    <id>http://yoursite.com/2017/07/04/重更/</id>
    <published>2017-07-04T02:45:55.206Z</published>
    <updated>2017-07-04T02:45:55.202Z</updated>
    
    <content type="html"><![CDATA[<h1 id="临近毕业，本站重新开始更新。"><a href="#临近毕业，本站重新开始更新。" class="headerlink" title="临近毕业，本站重新开始更新。"></a>临近毕业，本站重新开始更新。</h1><h2 id="毕业了"><a href="#毕业了" class="headerlink" title="毕业了"></a>毕业了</h2><p>python爬虫也很长一段时间没有进一步学习了，最近准备重新学习，期待自己以后可以坚持学习，并留下相关的脚印。<code>请大神手下留情</code> </p>
<p><code>计划学习以下内容</code></p>
<ol>
<li>python3爬虫及相关</li>
<li>图像处理</li>
<li>机器学习</li>
</ol>
<h2 id="反馈"><a href="#反馈" class="headerlink" title="反馈"></a>反馈</h2><p>若有问题，请直接留言，我会尽快回复<br><code>不知道会不会有读者,,,</code></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>本页面在搭建过程中主要参考以下页面</p>
<ol>
<li><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">Hexo官方文档</a></li>
<li><a href="http://lss53.github.io/" target="_blank" rel="external">lss53</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      临近毕业，本站重新开始更新，期待自己可以坚持
    
    </summary>
    
      <category term="说明" scheme="http://yoursite.com/categories/%E8%AF%B4%E6%98%8E/"/>
    
    
  </entry>
  
</feed>
